tosca_definitions_version: tosca_simple_yaml_1_0
description: ''
imports:
- micro: ../../data/micro-tosca-types.yml
topology_template:
  node_templates:
    shipping:
      type: micro.nodes.Service
      requirements:
      - run_time: order_db
      - run_time: rabbitmq
    order_db:
      type: micro.nodes.Database
    order:
      type: micro.nodes.Service
      requirements:
      - run_time: shipping
      - run_time: order_db
      - run_time: rabbitmq
    rabbitmq:
      type: micro.nodes.MessageBroker
    gateway:
      type: micro.nodes.MessageRouter
      requirements:
      - run_time: shipping
  groups:
    edgenodes:
      type: micro.groups.Edge
      members:
      - shipping
      - order
      - gateway
    team1:
      type: micro.groups.Team
      members:
      - shipping
      - rabbitmq
    team2:
      type: micro.groups.Team
      members:
      - order
      - order_db
  relationship_templates:
    t:
      type: micro.relationships.InteractsWith
      properties:
        timeout: true
    c:
      type: micro.relationships.InteractsWith
      properties:
        circuit_breaker: true
    d:
      type: micro.relationships.InteractsWith
      properties:
        dynamic_discovery: true
    tc:
      type: micro.relationships.InteractsWith
      properties:
        timeout: true
        circuit_breaker: true
    td:
      type: micro.relationships.InteractsWith
      properties:
        timeout: true
        dynamic_discovery: true
    cd:
      type: micro.relationships.InteractsWith
      properties:
        circuit_breaker: true
        dynamic_discovery: true
    tcd:
      type: micro.relationships.InteractsWith
      properties:
        timeout: true
        circuit_breaker: true
        dynamic_discovery: true
