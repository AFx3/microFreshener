tosca_definitions_version: micro_tosca_yaml_1.1
description: sockshop
imports:
- micro: https://di-unipi-socc.github.io/microTOSCA/1.1/microTOSCA.yaml
topology_template:
  node_templates:
    front-end:
      type: micro.nodes.Service
      requirements:
      - run_time: orders
      - run_time: payment
      - run_time: user
      - run_time: carts
      - run_time: catalogue
    orders:
      type: micro.nodes.Service
      requirements:
      - run_time: ordersdb
      - run_time: user
      - run_time: shipping
      - run_time: carts
    ordersdb:
      type: micro.nodes.Database
    payment:
      type: micro.nodes.Service
    user:
      type: micro.nodes.Service
      requirements:
      - run_time: user-db
    carts:
      type: micro.nodes.Service
      requirements:
      - run_time: carts-db
    carts-db:
      type: micro.nodes.Database
    catalogue-db:
      type: micro.nodes.Database
    catalogue:
      type: micro.nodes.Service
      requirements:
      - run_time: catalogue-db
    user-db:
      type: micro.nodes.Database
    shipping:
      type: micro.nodes.Service
      requirements:
      - run_time: rabbitmq
    rabbitmq:
      type: micro.nodes.MessageBroker
    queue-master:
      type: micro.nodes.Service
      requirements:
      - run_time: rabbitmq
    edge-router:
      type: micro.nodes.MessageRouter
      requirements:
      - run_time: front-end
  groups: {}
  relationship_templates:
    t:
      type: micro.relationships.InteractsWith
      properties:
        timeout: true
    c:
      type: micro.relationships.InteractsWith
      properties:
        circuit_breaker: true
    d:
      type: micro.relationships.InteractsWith
      properties:
        dynamic_discovery: true
    tc:
      type: micro.relationships.InteractsWith
      properties:
        timeout: true
        circuit_breaker: true
    td:
      type: micro.relationships.InteractsWith
      properties:
        timeout: true
        dynamic_discovery: true
    cd:
      type: micro.relationships.InteractsWith
      properties:
        circuit_breaker: true
        dynamic_discovery: true
    tcd:
      type: micro.relationships.InteractsWith
      properties:
        timeout: true
        circuit_breaker: true
        dynamic_discovery: true
